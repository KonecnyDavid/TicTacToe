(this.webpackJsonptictactoe=this.webpackJsonptictactoe||[]).push([[0],{12:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=12},13:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n(5),s=n.n(i),r=n(2),o=n(3),l=function(e,t,n,c){var a=e.length,i={leftMin:Math.max(0,t-5),rightMin:Math.min(a,t+5),topMin:Math.max(0,n-5),bottomMin:Math.min(a,n+5)},s=!1;return[[[1,1],[-1,-1]],[[-1,1],[1,-1]],[[0,-1],[0,1]],[[-1,0],[1,0]]].forEach((function(a){(function(e,t,n,c,a,i){for(var s=1,r=e,o=t,l=0;l<=1;l++){var j=!1;for(e=r,t=o,t+=c[l][0],e+=c[l][1];!j&&t>=i.topMin&&e>=i.leftMin&&t<i.bottomMin&&e<i.rightMin;)n[t][e]===a?s+=1:j=!0,t+=c[l][0],e+=c[l][1]}return s>=5})(t,n,e,a,c,i)&&(s=!0)})),s},j=n.p+"static/media/rec.31c6fa52.png",d=n.p+"static/media/plus.35630838.png",u=function(e){var t=e.isCircle,n=e.onClick,a=null===t?"":!0===t?Object(c.jsx)("img",{src:j,style:{width:40,height:40,marginBottom:"-5px"}}):Object(c.jsx)("img",{src:d,style:{width:40,height:40,marginBottom:"-5px"}});return Object(c.jsx)("td",{onClick:n,style:{width:50,height:50,padding:5,border:"1px solid black"},children:a})},b=function(e){var t=e.clickHandler,n=e.board;return Object(c.jsx)("table",{style:{borderCollapse:"collapse",float:"right"},children:Object(c.jsx)("tbody",{children:n.map((function(e,n){return Object(c.jsx)("tr",{children:e.map((function(e,a){return Object(c.jsx)(u,{isCircle:e,onClick:function(){return t(a,n)}},"".concat(n).concat(a))}))},n)}))})})},O=function(e){var t=e.gameState,n=e.isConnected,a=t.move?"You":"Opponent",i=t.started?Object(c.jsx)("span",{className:"tag is-success",children:"Started"}):Object(c.jsx)("span",{className:"tag is-danger",children:"Not Started"}),s=t.isCircle?"0":"X",r=n?Object(c.jsx)("span",{className:"tag is-success",children:"Connected"}):Object(c.jsx)("span",{className:"tag is-danger",children:"Not connected"}),o=null===t.winner?"No winner":"X"===t?"X is a winner":"O is a winner";return Object(c.jsxs)("aside",{className:"menu",children:[Object(c.jsx)("p",{className:"menu-label",children:"Game Info"}),Object(c.jsxs)("ul",{className:"menu-list",children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{children:r})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{children:i})}),Object(c.jsx)("li",{children:Object(c.jsxs)("a",{children:["Move: ",Object(c.jsx)("span",{class:"tag is-link",children:a})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)("a",{children:["Symbol: ",s]})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{children:o})})]})]})},h=n(6),m=new(n.n(h).a),f=function(e){var t=e.size,n=(e.gameId,Object(a.useState)({started:!1,isCircle:null,move:null,winner:null})),i=Object(o.a)(n,2),s=i[0],j=i[1],d=Object(a.useState)(function(e){for(var t=[],n=0;n<e;n++){for(var c=[],a=0;a<e;a++)c.push(null);t.push(c)}return t}(t)),u=Object(o.a)(d,2),h=u[0],f=u[1],x=Object(a.useState)(""),p=Object(o.a)(x,2),v=p[0],g=p[1],w=Object(a.useState)(""),N=Object(o.a)(w,2),C=N[0],k=N[1],M=Object(a.useState)(null),y=Object(o.a)(M,2),S=y[0],E=y[1],I=Object(a.useState)(null),X=Object(o.a)(I,2),B=X[0],U=X[1],z=function(e){S&&S.send(e)};return Object(a.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("gameId");e&&k(e)}),[]),Object(a.useEffect)((function(){if(B)switch(B.type){case"connection":break;case"turn":f(B.data),j(Object(r.a)(Object(r.a)({},s),{},{move:!0}));break;case"win":j(Object(r.a)(Object(r.a)({},s),{},{move:!1,started:!1,winner:B.data?"O":"X"}))}}),[B]),Object(a.useEffect)((function(){m.on("open",(function(e){g(e),m.on("connection",(function(e){E(e),k(e.id),e.on("data",(function(e){console.log(e),U(e)}))}))}))}),[]),Object(a.useEffect)((function(){if(S){var e=C>v;j(Object(r.a)(Object(r.a)({},s),{},{started:!0,isCircle:e,move:e}))}}),[S]),Object(a.useEffect)((function(){if(!S&&""!==C&&""!==v){var e=m.connect(C);e.on("open",(function(){E(e),e.on("data",(function(e){console.log(e),U(e)}))}))}}),[C,v]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(b,{clickHandler:function(e,t){if(s.started&&s.move&&null===h[t][e]){var n=h.map((function(n,c){return n.map((function(n,a){return e===a&&t===c?s.isCircle:n}))}));f(n),z({type:"turn",data:n}),l(n,e,t,s.isCircle)?(j(Object(r.a)(Object(r.a)({},s),{},{move:!1,winner:s.isCircle?"O":"X",started:!1})),z({type:"win",data:s.isCircle})):j(Object(r.a)(Object(r.a)({},s),{},{move:!1}))}},board:h})}),Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(O,{gameState:s,isConnected:!!S})})]}),Object(c.jsx)("nav",{className:"level",children:Object(c.jsx)("div",{className:"level-item has-text-centered",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"heading",children:"Game Id"}),Object(c.jsx)("p",{className:"title",children:v})]})})})]})};var x=function(e){var t=e.gameId;return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(f,{size:12,player:"circle",gameId:t})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.onload=function(){var e=document.getElementById("root");s.a.render(Object(c.jsx)(x,{gameId:e.dataset.gameid}),e)},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.45a009bd.chunk.js.map